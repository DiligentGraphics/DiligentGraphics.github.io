<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Diligent Engine: Diligent::Bloom Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<script type="text/javascript" src="../../clipboard.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Diligent Engine
   </div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(1); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('d3/de0/classDiligent_1_1Bloom.html','../../'); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="../../db/d7e/classDiligent_1_1Bloom-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">Diligent::Bloom Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Implements <a href="https://github.com/DiligentGraphics/DiligentFX/tree/master/PostProcess/Bloom">bloom post-process effect</a>.  
 <a href="#details">More...</a></p>

<p><code>#include &lt;Bloom.hpp&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/df5/structDiligent_1_1Bloom_1_1CreateInfo.html">CreateInfo</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create info.  <a href="../../d5/df5/structDiligent_1_1Bloom_1_1CreateInfo.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/dff/structDiligent_1_1Bloom_1_1RenderAttributes.html">RenderAttributes</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Render attributes.  <a href="../../d3/dff/structDiligent_1_1Bloom_1_1RenderAttributes.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:abb0c811e23ccc8d906112497efe59b70" id="r_abb0c811e23ccc8d906112497efe59b70"><td class="memItemLeft" align="right" valign="top"><a id="abb0c811e23ccc8d906112497efe59b70" name="abb0c811e23ccc8d906112497efe59b70"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>Bloom</b> (<a class="el" href="../../de/dc2/classDiligent_1_1IRenderDevice.html">IRenderDevice</a> *pDevice, const <a class="el" href="../../d5/df5/structDiligent_1_1Bloom_1_1CreateInfo.html">CreateInfo</a> &amp;CI)</td></tr>
<tr class="memdesc:abb0c811e23ccc8d906112497efe59b70"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a new instance of the <a class="el" href="../../d3/de0/classDiligent_1_1Bloom.html" title="Implements bloom post-process effect.">Bloom</a> class. <br /></td></tr>
<tr class="separator:abb0c811e23ccc8d906112497efe59b70"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a128c3812867c7e4a6f116937fed00d3e" id="r_a128c3812867c7e4a6f116937fed00d3e"><td class="memItemLeft" align="right" valign="top"><a id="a128c3812867c7e4a6f116937fed00d3e" name="a128c3812867c7e4a6f116937fed00d3e"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>PrepareResources</b> (<a class="el" href="../../de/dc2/classDiligent_1_1IRenderDevice.html">IRenderDevice</a> *pDevice, <a class="el" href="../../d9/dcf/classDiligent_1_1IDeviceContext.html">IDeviceContext</a> *pDeviceContext, PostFXContext *pPostFXContext, FEATURE_FLAGS FeatureFlags)</td></tr>
<tr class="memdesc:a128c3812867c7e4a6f116937fed00d3e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prepares the bloom effect for rendering. <br /></td></tr>
<tr class="separator:a128c3812867c7e4a6f116937fed00d3e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c78fcdd21d4c574d7efce551d53b5f8" id="r_a6c78fcdd21d4c574d7efce551d53b5f8"><td class="memItemLeft" align="right" valign="top"><a id="a6c78fcdd21d4c574d7efce551d53b5f8" name="a6c78fcdd21d4c574d7efce551d53b5f8"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>Execute</b> (const <a class="el" href="../../d3/dff/structDiligent_1_1Bloom_1_1RenderAttributes.html">RenderAttributes</a> &amp;RenderAttribs)</td></tr>
<tr class="memdesc:a6c78fcdd21d4c574d7efce551d53b5f8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Executes the bloom effect. <br /></td></tr>
<tr class="separator:a6c78fcdd21d4c574d7efce551d53b5f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3efe40635aed6f0534794187be3144aa" id="r_a3efe40635aed6f0534794187be3144aa"><td class="memItemLeft" align="right" valign="top"><a id="a3efe40635aed6f0534794187be3144aa" name="a3efe40635aed6f0534794187be3144aa"></a>
<a class="el" href="../../dc/d24/structDiligent_1_1ITextureView.html">ITextureView</a> *&#160;</td><td class="memItemRight" valign="bottom"><b>GetBloomTextureSRV</b> () const</td></tr>
<tr class="memdesc:a3efe40635aed6f0534794187be3144aa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the shader resource view of the bloom texture. <br /></td></tr>
<tr class="separator:a3efe40635aed6f0534794187be3144aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-methods" name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:aae4b0f8ec0342b6354552d8e9804ca0e" id="r_aae4b0f8ec0342b6354552d8e9804ca0e"><td class="memItemLeft" align="right" valign="top"><a id="aae4b0f8ec0342b6354552d8e9804ca0e" name="aae4b0f8ec0342b6354552d8e9804ca0e"></a>
static bool&#160;</td><td class="memItemRight" valign="bottom"><b>UpdateUI</b> (HLSL::BloomAttribs &amp;Attribs, FEATURE_FLAGS &amp;FeatureFlags)</td></tr>
<tr class="memdesc:aae4b0f8ec0342b6354552d8e9804ca0e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds the ImGui controls to the UI. <br /></td></tr>
<tr class="separator:aae4b0f8ec0342b6354552d8e9804ca0e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Implements <a href="https://github.com/DiligentGraphics/DiligentFX/tree/master/PostProcess/Bloom">bloom post-process effect</a>. </p>
<h1><a class="anchor" id="autotoc_md122"></a>
Bloom</h1>
<p><img src="../../media/bloom.jpg" alt="" class="inline"/></p>
<h2><a class="anchor" id="autotoc_md123"></a>
Table of contents</h2>
<ul>
<li>Introduction</li>
<li>Integration guidelines<ul>
<li>Input resources</li>
<li>Host API</li>
</ul>
</li>
<li>Implementation details</li>
<li><a class="el" href="../../de/d6b/README.html#references">References</a></li>
</ul>
<h2><a class="anchor" id="autotoc_md124"></a>
Introduction</h2>
<p>Displays have a low dynamic range (LDR), limiting brightness levels to a scale from black to full brightness (RGB 0 to 1), unlike the unlimited brightness in real life. High dynamic range (HDR) technology allows for brightness levels above 1, though actual displays still limit these to their maximum LDR brightness. HDR scenes are adapted for LDR displays through tonemapping and auto-exposure, which adjust the image's brightness and contrast.</p>
<p><a class="el" href="../../d3/de0/classDiligent_1_1Bloom.html" title="Implements bloom post-process effect.">Bloom</a> is an effect that simulates intense brightness by causing bright pixels to bleed into adjacent ones.</p>
<h2><a class="anchor" id="autotoc_md125"></a>
Integration guidelines</h2>
<h3><a class="anchor" id="autotoc_md126"></a>
Input resources</h3>
<p>The following table enumerates all external inputs required by <a class="el" href="../../d3/de0/classDiligent_1_1Bloom.html" title="Implements bloom post-process effect.">Bloom</a> effect.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone"><b>Name</b>   </th><th class="markdownTableHeadNone"><b>Format</b>   </th><th class="markdownTableHeadNone"><b>Notes</b>    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Color buffer   </td><td class="markdownTableBodyNone"><code>APPLICATION SPECIFIED (3x FLOAT)</code>   </td><td class="markdownTableBodyNone">The HDR render target of the current frame containing the scene radiance   </td></tr>
</table>
<p>The effect uses a number of parameters that control the quality and performance and are organized into the <code>HLSL::ScreenSpaceAmbientOcclusionAttribs</code> structure. The following table lists the parameters and their descriptions.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone"><b>Name</b>   </th><th class="markdownTableHeadNone"><b>Notes</b>    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>Intensity</code>   </td><td class="markdownTableBodyNone">Intensity of the bloom effect.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>Threshold</code>   </td><td class="markdownTableBodyNone">The minimum brightness required for a pixel to contribute to the bloom effect.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>SoftTreshold</code>   </td><td class="markdownTableBodyNone">The softness of the threshold. A higher value will result in a softer threshold.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>Radius</code>   </td><td class="markdownTableBodyNone">The size of the bloom effect. A larger radius will result in a larger area of the image being affected by the bloom effect.   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md127"></a>
Host API</h3>
<p>To integrate <a class="el" href="../../d3/de0/classDiligent_1_1Bloom.html" title="Implements bloom post-process effect.">Bloom</a> into your project, include the following header files: </p><div class="fragment"><div class="line"><span class="preprocessor">#include &quot;PostFXContext.hpp&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="../../df/d13/Bloom_8hpp.html">Bloom.hpp</a>&quot;</span></div>
<div class="ttc" id="aBloom_8hpp_html"><div class="ttname"><a href="../../df/d13/Bloom_8hpp.html">Bloom.hpp</a></div></div>
</div><!-- fragment --> <div class="fragment"><div class="line"><span class="keyword">namespace </span>HLSL</div>
<div class="line">{</div>
<div class="line"><span class="preprocessor">#include &quot;Shaders/Common/public/BasicStructures.fxh&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;Shaders/PostProcess/Bloom/public/BloomStructures.fxh&quot;</span></div>
<div class="line">} <span class="comment">// namespace HLSL</span></div>
</div><!-- fragment --><p>Now, create the necessary objects: </p><div class="fragment"><div class="line">m_PostFXContext = std::make_unique&lt;PostFXContext&gt;(m_pDevice);</div>
<div class="line">m_Bloom         = std::make_unique&lt;Bloom&gt;(m_pDevice);</div>
</div><!-- fragment --><p>Next, call the methods to prepare resources for the <code>PostFXContext</code> and <code><a class="el" href="../../d3/de0/classDiligent_1_1Bloom.html" title="Implements bloom post-process effect.">Bloom</a></code> objects. This needs to be done every frame before starting the rendering process. </p><div class="fragment"><div class="line">PostFXContext::FrameDesc FrameDesc;</div>
<div class="line">FrameDesc.Index  = m_CurrentFrameNumber; <span class="comment">// Current frame number.</span></div>
<div class="line">FrameDesc.Width  = SCDesc.Width;         <span class="comment">// Current screen width.</span></div>
<div class="line">FrameDesc.Height = SCDesc.Height;        <span class="comment">// Current screen height.</span></div>
<div class="line">m_PostFXContext-&gt;PrepareResources(m_pDevice, FrameDesc, PostFXContext::FEATURE_FLAG_NONE);</div>
<div class="line"> </div>
<div class="line">m_Bloom-&gt;PrepareResources(m_pDevice, m_pImmediateContext, m_PostFXContext.get(), Bloom::FEATURE_FLAG_NONE);</div>
</div><!-- fragment --><p>Next, call the <code>PostFXContext::Execute</code> method prepare intermediate resources required by all post-processing objects dependent on <code>PostFXContext</code>. This method can take a constant buffer containing the current and previous-frame cameras (refer to these code examples: [<a href="https://github.com/DiligentGraphics/DiligentSamples/blob/380b0a05b6c72d80fd6d574d7343ead77d6dd7eb/Tutorials/Tutorial27_PostProcessing/src/Tutorial27_PostProcessing.cpp#L164">0</a>] and [<a href="https://github.com/DiligentGraphics/DiligentSamples/blob/380b0a05b6c72d80fd6d574d7343ead77d6dd7eb/Tutorials/Tutorial27_PostProcessing/src/Tutorial27_PostProcessing.cpp#L228">1</a>]). Alternatively, you can pass the corresponding pointers <code>const HLSL::CameraAttribs* pCurrCamera</code> and <code>const HLSL::CameraAttribs* pPrevCamera</code> for the current and previous cameras, respectively. You also need to pass the depth of the current and previous frames, and a buffer with motion vectors in NDC space, via the corresponding <code>ITextureView* pCurrDepthBufferSRV</code>, <code>ITextureView* pPrevDepthBufferSRV</code>, and <code>ITextureView* pMotionVectorsSRV</code> pointers.</p>
<div class="fragment"><div class="line">PostFXContext::RenderAttributes PostFXAttibs;</div>
<div class="line">PostFXAttibs.pDevice             = m_pDevice;</div>
<div class="line">PostFXAttibs.pDeviceContext      = m_pImmediateContext;</div>
<div class="line">PostFXAttibs.pCameraAttribsCB    = m_FrameAttribsCB;</div>
<div class="line">m_PostFXContext-&gt;Execute(PostFXAttibs);</div>
</div><!-- fragment --><p>To calculate bloom effect, call the <code><a class="el" href="#a6c78fcdd21d4c574d7efce551d53b5f8" title="Executes the bloom effect.">Bloom::Execute</a></code> method. Before this, fill the <code>BloomAttribs</code> and <code><a class="el" href="../../d3/dff/structDiligent_1_1Bloom_1_1RenderAttributes.html" title="Render attributes.">Bloom::RenderAttributes</a></code> structures with the necessary data. Refer to the Input resources section for parameter description. </p><div class="fragment"><div class="line">HLSL::BloomAttribs BloomSettings{};</div>
<div class="line"> </div>
<div class="line"><a class="code hl_struct" href="../../d3/dff/structDiligent_1_1Bloom_1_1RenderAttributes.html">Bloom::RenderAttributes</a> BloomRenderAttribs{};</div>
<div class="line">BloomRenderAttribs.<a class="code hl_variable" href="../../d3/dff/structDiligent_1_1Bloom_1_1RenderAttributes.html#a11243dbdf5fc3d29e5b90d38c8db95e8">pDevice</a>         = m_pDevice;</div>
<div class="line">BloomRenderAttribs.pDeviceContext  = m_pImmediateContext;</div>
<div class="line">BloomRenderAttribs.pPostFXContext  = m_PostFXContext.get();</div>
<div class="line">BloomRenderAttribs.pColorBufferSRV = m_ColorBuffer;</div>
<div class="line">BloomRenderAttribs.pBloomAttribs   = &amp;BloomSettings;</div>
<div class="line">m_Bloom-&gt;Execute(SSAORenderAttribs);</div>
<div class="ttc" id="astructDiligent_1_1Bloom_1_1RenderAttributes_html"><div class="ttname"><a href="../../d3/dff/structDiligent_1_1Bloom_1_1RenderAttributes.html">Diligent::Bloom::RenderAttributes</a></div><div class="ttdoc">Render attributes.</div><div class="ttdef"><b>Definition</b> Bloom.hpp:201</div></div>
<div class="ttc" id="astructDiligent_1_1Bloom_1_1RenderAttributes_html_a11243dbdf5fc3d29e5b90d38c8db95e8"><div class="ttname"><a href="../../d3/dff/structDiligent_1_1Bloom_1_1RenderAttributes.html#a11243dbdf5fc3d29e5b90d38c8db95e8">Diligent::Bloom::RenderAttributes::pDevice</a></div><div class="ttdeci">IRenderDevice * pDevice</div><div class="ttdoc">Render device that may be used to create new objects needed for this frame, if any.</div><div class="ttdef"><b>Definition</b> Bloom.hpp:203</div></div>
</div><!-- fragment --><p>To obtain an <code><a class="el" href="../../dc/d24/structDiligent_1_1ITextureView.html" title="Texture view interface.">ITextureView</a></code> of the texture containing the bloom result, use the <code><a class="el" href="#a3efe40635aed6f0534794187be3144aa" title="Returns the shader resource view of the bloom texture.">Bloom::GetBloomTextureSRV</a></code> method.</p>
<h2><a class="anchor" id="autotoc_md128"></a>
Implementation details</h2>
<p>Our implementation is based on the technique described in <b>[Léna Piquet, 2021]</b>. We modified it by adding a threshold and using the Additive <a class="el" href="../../d3/de0/classDiligent_1_1Bloom.html" title="Implements bloom post-process effect.">Bloom</a> as described in <b>[Alexander Christensen, 2022]</b>. Additionally, we changed the weighting to eliminate fireflies from this article (section Bonus material 2: Karis average) as follows:</p>
<div class="fragment"><div class="line"><span class="keywordtype">float</span> Weights[5];</div>
<div class="line">Weights[0] = 0.125f;</div>
<div class="line">Weights[1] = 0.125f;</div>
<div class="line">Weights[2] = 0.125f;</div>
<div class="line">Weights[3] = 0.125f;</div>
<div class="line">Weights[4] = 0.5f;</div>
<div class="line"> </div>
<div class="line">float3 Groups[5];</div>
<div class="line">Groups[0] = (A + B + D + E) / 4.0f;</div>
<div class="line">Groups[1] = (B + C + E + F) / 4.0f;</div>
<div class="line">Groups[2] = (D + E + G + H) / 4.0f;</div>
<div class="line">Groups[3] = (E + F + H + I) / 4.0f;</div>
<div class="line">Groups[4] = (J + K + L + M) / 4.0f;</div>
<div class="line">    </div>
<div class="line">float4 ColorSum = float4(0.0, 0.0, 0.0, 0.0);</div>
<div class="line"><span class="keywordflow">for</span> (<span class="keywordtype">int</span> GroupId = 0; GroupId &lt; 5; ++GroupId) {</div>
<div class="line">    <span class="keywordtype">float</span> Weight = Weights[GroupId] * KarisAverage(Groups[GroupId]);</div>
<div class="line">    ColorSum += float4(Groups[GroupId], 1.0) * Weight;</div>
<div class="line">}</div>
<div class="line">float3 ResultColor = ColorSum.xyz / ColorSum.w;</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md129"></a>
References</h2>
<ul>
<li><b>[Jimenez, 2014]</b>: Next Generation Post Processing in Call of Duty: Advanced Warfare - <a href="https://www.iryoku.com/next-generation-post-processing-in-call-of-duty-advanced-warfare/">https://www.iryoku.com/next-generation-post-processing-in-call-of-duty-advanced-warfare/</a></li>
<li><b>[Léna Piquet, 2021]</b>: Custom <a class="el" href="../../d3/de0/classDiligent_1_1Bloom.html" title="Implements bloom post-process effect.">Bloom</a> Post-Process in Unreal Engine - <a href="https://www.froyok.fr/blog/2021-12-ue4-custom-bloom/">https://www.froyok.fr/blog/2021-12-ue4-custom-bloom/</a></li>
<li><b>[Alexander Christensen, 2022]</b>: Physically Based <a class="el" href="../../d3/de0/classDiligent_1_1Bloom.html" title="Implements bloom post-process effect.">Bloom</a> - <a href="https://learnopengl.com/Guest-Articles/2022/Phys.-Based-Bloom/">https://learnopengl.com/Guest-Articles/2022/Phys.-Based-Bloom/</a>   </li>
</ul>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.13.2-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../d7/dca/namespaceDiligent.html">Diligent</a></li><li class="navelem"><a class="el" href="../../d3/de0/classDiligent_1_1Bloom.html">Bloom</a></li>
    <li class="footer">
      <a href="https://diligentgraphics.com">
        <img class="footer" src="https://github.com/DiligentGraphics/DiligentCore/raw/master/media/diligentgraphics-logo.png" width="99" height="32" alt="Diligent Graphics" />
      </a>
    </li>
  </ul>
</div>
</body>
</html>
