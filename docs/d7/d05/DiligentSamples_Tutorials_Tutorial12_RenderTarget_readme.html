<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Diligent Engine: Tutorial12 - Render Target</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<script type="text/javascript" src="../../clipboard.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Diligent Engine
   </div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(1); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('d7/d05/DiligentSamples_Tutorials_Tutorial12_RenderTarget_readme.html','../../'); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Tutorial12 - Render Target</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This tutorial demonstrates how to render a 3d textured cube into an offscreen render target and do a simple distortion post-processing effect. It is assumed that you are familiar with all basics covered in Tutorial01 to Tutorial03.</p>
<p><img src="https://github.com/DiligentGraphics/DiligentSamples/raw/master/Tutorials/Tutorial12_RenderTarget/Animation_Large.gif" alt="" class="inline"/></p>
<p><a href="https://diligentgraphics.github.io/wasm-modules/Tutorial12_RenderTarget/Tutorial12_RenderTarget.html">â–¶ Run in the browser</a></p>
<h2><a class="anchor" id="autotoc_md356"></a>
Cube Resources</h2>
<p>Initialization of all cube-related resources and states is almost identical to how it is done in Tutorial 03. The only difference is that this time the rendering of our cube will be done into our offscreen render target, and we must ensure that the PSO uses corresponding formats:</p>
<div class="fragment"><div class="line">PSOCreateInfo.GraphicsPipeline.NumRenderTargets = 1;</div>
<div class="line">PSOCreateInfo.GraphicsPipeline.RTVFormats[0]    = RenderTargetFormat;</div>
<div class="line">PSOCreateInfo.GraphicsPipeline.DSVFormat        = DepthBufferFormat;</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md357"></a>
Shaders</h2>
<p>The render target's vertex shader generates the geometry procedurally using an array of hard-coded vertex positions and UV coordinates.</p>
<div class="fragment"><div class="line">struct VSInput</div>
<div class="line">{</div>
<div class="line">    uint VertexID : SV_VertexID;</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line">struct PSInput</div>
<div class="line">{</div>
<div class="line">    float4 Pos : SV_POSITION;</div>
<div class="line">    float2 UV  : TEX_COORD;</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line">void main(in  VSInput VSIn,</div>
<div class="line">          out PSInput PSIn)</div>
<div class="line">{</div>
<div class="line">    float4 Pos[4];</div>
<div class="line">    Pos[0] = float4(-1.0, -1.0, 0.0, 1.0);</div>
<div class="line">    Pos[1] = float4(-1.0, +1.0, 0.0, 1.0);</div>
<div class="line">    Pos[2] = float4(+1.0, -1.0, 0.0, 1.0);</div>
<div class="line">    Pos[3] = float4(+1.0, +1.0, 0.0, 1.0);</div>
<div class="line"> </div>
<div class="line">    float2 UV[4];</div>
<div class="line">    UV[0] = float2(+0.0, +1.0);</div>
<div class="line">    UV[1] = float2(+0.0, +0.0);</div>
<div class="line">    UV[2] = float2(+1.0, +1.0);</div>
<div class="line">    UV[3] = float2(+1.0, +0.0);</div>
<div class="line"> </div>
<div class="line">    PSIn.Pos = Pos[VSIn.VertexID];</div>
<div class="line">    PSIn.UV  = UV[VSIn.VertexID];</div>
<div class="line">}</div>
</div><!-- fragment --><p>Note that <code>float4 Pos[4] = {...};</code> construct does not translate well to GLSL.</p>
<p>Unlike other graphics API's, OpenGL has its texture coordinates origin at the bottom-left corner instead of the top left. When sampling a regular texture, there is no visible difference since the texture data is also uploaded starting from that lower-left corner. When sampling a framebuffer attachment, there is a visible difference, though. Hence we need to flip the Y coordinate of the frame buffer attachment in OpenGL and OpenGL ES.</p>
<div class="fragment"><div class="line">Texture2D    g_Texture;</div>
<div class="line">SamplerState g_Texture_sampler;</div>
<div class="line"> </div>
<div class="line">struct PSInput</div>
<div class="line">{</div>
<div class="line">    float4 Pos   : SV_POSITION;</div>
<div class="line">    float2 UV    : TEX_COORD;</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line">struct PSOutput</div>
<div class="line">{</div>
<div class="line">    float4 Color : SV_TARGET;</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line">void main(in  PSInput  PSIn,</div>
<div class="line">          out PSOutput PSOut)</div>
<div class="line">{</div>
<div class="line">#if defined(DESKTOP_GL) || defined(GL_ES)</div>
<div class="line">    float2 UV = float2(PSIn.UV.x, 1.0 - PSIn.UV.y);</div>
<div class="line">#else</div>
<div class="line">    float2 UV = PSIn.UV;</div>
<div class="line">#endif</div>
<div class="line"> </div>
<div class="line">    float2 DistortedUV = UV + float2(sin(UV.y*30.0)*0.1  * sin(g_Time.x*3.0),</div>
<div class="line">                                     sin(UV.x*20.0)*0.02 * sin(g_Time.x*2.0));</div>
<div class="line">    PSOut.Color = g_Texture.Sample(g_Texture_sampler, DistortedUV);</div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md358"></a>
Initializing shaders and pipeline states</h2>
<p>First we need to create the shaders that will handle our simple post-processing effect.</p>
<div class="fragment"><div class="line">ShaderCreateInfo CreationAttribs;</div>
<div class="line">CreationAttribs.<a class="code hl_variable" href="../../dd/d3d/structDiligent_1_1ShaderCreateInfo.html#a4fb33b4268af9a634d5ac6b0a5efb9cd">SourceLanguage</a>             = SHADER_SOURCE_LANGUAGE_HLSL;</div>
<div class="line">CreationAttribs.UseCombinedTextureSamplers = <span class="keyword">true</span>;</div>
<div class="line">BasicShaderSourceStreamFactory BasicSSSFactory;</div>
<div class="line">CreationAttribs.pShaderSourceStreamFactory = pShaderSourceFactory;</div>
<div class="line"> </div>
<div class="line">RefCntAutoPtr&lt;IShader&gt; pRTVS;</div>
<div class="line">{</div>
<div class="line">    CreationAttribs.Desc.ShaderType = SHADER_TYPE_VERTEX;</div>
<div class="line">    CreationAttribs.EntryPoint      = <span class="stringliteral">&quot;main&quot;</span>;</div>
<div class="line">    CreationAttribs.Desc.Name       = <span class="stringliteral">&quot;Render Target VS&quot;</span>;</div>
<div class="line">    CreationAttribs.FilePath        = <span class="stringliteral">&quot;rendertarget.vsh&quot;</span>;</div>
<div class="line">    pDevice-&gt;CreateShader(CreationAttribs, &amp;pRTVS);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">RefCntAutoPtr&lt;IShader&gt; pRTPS;</div>
<div class="line">{</div>
<div class="line">    CreationAttribs.Desc.ShaderType = SHADER_TYPE_PIXEL;</div>
<div class="line">    CreationAttribs.EntryPoint      = <span class="stringliteral">&quot;main&quot;</span>;</div>
<div class="line">    CreationAttribs.Desc.Name       = <span class="stringliteral">&quot;Render Target PS&quot;</span>;</div>
<div class="line">    CreationAttribs.FilePath        = <span class="stringliteral">&quot;rendertarget.psh&quot;</span>;</div>
<div class="line">    pDevice-&gt;CreateShader(CreationAttribs, &amp;pRTPS);</div>
<div class="line">}</div>
<div class="ttc" id="astructDiligent_1_1ShaderCreateInfo_html_a4fb33b4268af9a634d5ac6b0a5efb9cd"><div class="ttname"><a href="../../dd/d3d/structDiligent_1_1ShaderCreateInfo.html#a4fb33b4268af9a634d5ac6b0a5efb9cd">Diligent::ShaderCreateInfo::SourceLanguage</a></div><div class="ttdeci">SHADER_SOURCE_LANGUAGE SourceLanguage</div><div class="ttdoc">Shader source language. See Diligent::SHADER_SOURCE_LANGUAGE.</div><div class="ttdef"><b>Definition</b> Shader.h:486</div></div>
</div><!-- fragment --><p>Then, we need to create another pipeline state object that will store all the information required to render our small post-processing effect.</p>
<div class="fragment"><div class="line">GraphicsPipelineStateCreateInfo RTPSOCreateInfo;</div>
<div class="line"> </div>
<div class="line">PSOCreateInfo.<a class="code hl_variable" href="../../da/d41/structDiligent_1_1PipelineStateCreateInfo.html#a7c216c149f216b75c424c9190cd160ec">PSODesc</a>.<a class="code hl_variable" href="../../d3/df9/structDiligent_1_1DeviceObjectAttribs.html#a14a31dc6ad69e0b79514e5349e9b4fc0">Name</a> = <span class="stringliteral">&quot;Render Target PSO&quot;</span>;</div>
<div class="line">PSOCreateInfo.PSODesc.PipelineType                          = PIPELINE_TYPE_GRAPHICS;</div>
<div class="line">PSOCreateInfo.GraphicsPipeline.NumRenderTargets             = 1;</div>
<div class="line">PSOCreateInfo.GraphicsPipeline.RTVFormats[0]                = pSwapChain-&gt;GetDesc().ColorBufferFormat;</div>
<div class="line">PSOCreateInfo.GraphicsPipeline.DSVFormat                    = pSwapChain-&gt;GetDesc().DepthBufferFormat;</div>
<div class="line">PSOCreateInfo.GraphicsPipeline.PrimitiveTopology            = PRIMITIVE_TOPOLOGY_TRIANGLE_STRIP;</div>
<div class="line">PSOCreateInfo.GraphicsPipeline.RasterizerDesc.CullMode      = CULL_MODE_BACK;</div>
<div class="line">PSOCreateInfo.GraphicsPipeline.DepthStencilDesc.DepthEnable = False;</div>
<div class="line">PSOCreateInfo.pVS = pRTVS;</div>
<div class="line">PSOCreateInfo.pPS = pRTPS;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Define variable type that will be used by default</span></div>
<div class="line">PSOCreateInfo.PSODesc.ResourceLayout.DefaultVariableType = SHADER_RESOURCE_VARIABLE_TYPE_STATIC;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Shader variables should typically be mutable, which means they are expected</span></div>
<div class="line"><span class="comment">// to change on a per-instance basis</span></div>
<div class="line">ShaderResourceVariableDesc Vars[] =</div>
<div class="line">{</div>
<div class="line">    { SHADER_TYPE_PIXEL, <span class="stringliteral">&quot;g_Texture&quot;</span>, SHADER_RESOURCE_VARIABLE_TYPE_MUTABLE }</div>
<div class="line">};</div>
<div class="line">PSOCreateInfo.PSODesc.ResourceLayout.Variables    = Vars;</div>
<div class="line">PSOCreateInfo.PSODesc.ResourceLayout.NumVariables = _countof(Vars);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Define immutable sampler for g_Texture. Immutable samplers should be used whenever possible</span></div>
<div class="line">ImmutableSamplerDesc ImtblSamplers[] =</div>
<div class="line">{</div>
<div class="line">    { SHADER_TYPE_PIXEL, <span class="stringliteral">&quot;g_Texture&quot;</span>, Sam_LinearClamp }</div>
<div class="line">};</div>
<div class="line">PSOCreateInfo.PSODesc.ResourceLayout.ImmutableSamplers    = ImtblSamplers;</div>
<div class="line">PSOCreateInfo.PSODesc.ResourceLayout.NumImmutableSamplers = _countof(ImtblSamplers);</div>
<div class="line"> </div>
<div class="line">pDevice-&gt;CreateGraphicsPipelineState(RTPSOCreateInfo, &amp;m_pRTPSO);</div>
<div class="ttc" id="astructDiligent_1_1DeviceObjectAttribs_html_a14a31dc6ad69e0b79514e5349e9b4fc0"><div class="ttname"><a href="../../d3/df9/structDiligent_1_1DeviceObjectAttribs.html#a14a31dc6ad69e0b79514e5349e9b4fc0">Diligent::DeviceObjectAttribs::Name</a></div><div class="ttdeci">const Char * Name</div><div class="ttdoc">Object name.</div><div class="ttdef"><b>Definition</b> GraphicsTypes.h:1319</div></div>
<div class="ttc" id="astructDiligent_1_1PipelineStateCreateInfo_html_a7c216c149f216b75c424c9190cd160ec"><div class="ttname"><a href="../../da/d41/structDiligent_1_1PipelineStateCreateInfo.html#a7c216c149f216b75c424c9190cd160ec">Diligent::PipelineStateCreateInfo::PSODesc</a></div><div class="ttdeci">PipelineStateDesc PSODesc</div><div class="ttdoc">Pipeline state description.</div><div class="ttdef"><b>Definition</b> PipelineState.h:702</div></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md359"></a>
Creating Offscreen Render Target</h2>
<p>In this tutorial we will use our own off-screen depth buffer, so we can save memory by not initializing the depth buffer in the swap chain:</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> Tutorial12_RenderTarget::ModifyEngineInitInfo(<span class="keyword">const</span> ModifyEngineInitInfoAttribs&amp; Attribs)</div>
<div class="line">{</div>
<div class="line">    SampleBase::ModifyEngineInitInfo(Attribs);</div>
<div class="line">    <span class="comment">// In this tutorial we will be using off-screen depth-stencil buffer, so</span></div>
<div class="line">    <span class="comment">// we do not need the one in the swap chain.</span></div>
<div class="line">    Attribs.SCDesc.DepthBufferFormat = TEX_FORMAT_UNKNOWN;</div>
<div class="line">}</div>
</div><!-- fragment --><p>An offscreen render target is used to render the cube into and then sampled by the post-processing shader. We want the size of our render targets to match the window size, so we override <code>WindowResize()</code> method and create a new render target every time when the window resizes.</p>
<div class="fragment"><div class="line">RefCntAutoPtr&lt;ITexture&gt; pRTColor;</div>
<div class="line">TextureDesc RTColorDesc;</div>
<div class="line">RTColorDesc.<a class="code hl_variable" href="../../d1/d76/structDiligent_1_1TextureDesc.html#ac2f19e2db2d62d58ecaae3b0f1c35490">Type</a>        = RESOURCE_DIM_TEX_2D;</div>
<div class="line">RTColorDesc.Width       = pSwapChain-&gt;GetDesc().Width;</div>
<div class="line">RTColorDesc.Height      = pSwapChain-&gt;GetDesc().Height;</div>
<div class="line">RTColorDesc.MipLevels   = 1;</div>
<div class="line">RTColorDesc.Format      = RenderTargetFormat;</div>
<div class="line">RTColorDesc.BindFlags   = BIND_SHADER_RESOURCE | BIND_RENDER_TARGET;</div>
<div class="line">pDevice-&gt;CreateTexture(RTColorDesc, <span class="keyword">nullptr</span>, &amp;pRTColor);</div>
<div class="line">m_pRTColorRTV = pRTColor-&gt;GetDefaultView(TEXTURE_VIEW_RENDER_TARGET);</div>
<div class="ttc" id="astructDiligent_1_1TextureDesc_html_ac2f19e2db2d62d58ecaae3b0f1c35490"><div class="ttname"><a href="../../d1/d76/structDiligent_1_1TextureDesc.html#ac2f19e2db2d62d58ecaae3b0f1c35490">Diligent::TextureDesc::Type</a></div><div class="ttdeci">RESOURCE_DIMENSION Type</div><div class="ttdoc">Texture type. See Diligent::RESOURCE_DIMENSION for details.</div><div class="ttdef"><b>Definition</b> Texture.h:84</div></div>
</div><!-- fragment --><p>We also need to create a depth buffer.</p>
<div class="fragment"><div class="line">RefCntAutoPtr&lt;ITexture&gt; pRTDepth;</div>
<div class="line">TextureDesc RTDepthDesc = RTColorDesc;</div>
<div class="line">RTDepthDesc.<a class="code hl_variable" href="../../d1/d76/structDiligent_1_1TextureDesc.html#a61757069b9f990537b730d7dc5033ee9">Format</a>      = DepthBufferFormat;</div>
<div class="line">RTDepthDesc.BindFlags   = BIND_SHADER_RESOURCE | BIND_DEPTH_STENCIL;</div>
<div class="line">pDevice-&gt;CreateTexture(RTDepthDesc, <span class="keyword">nullptr</span>, &amp;pRTDepth);</div>
<div class="line">m_pRTDepthDSV = pRTDepth-&gt;GetDefaultView(TEXTURE_VIEW_DEPTH_STENCIL);</div>
<div class="ttc" id="astructDiligent_1_1TextureDesc_html_a61757069b9f990537b730d7dc5033ee9"><div class="ttname"><a href="../../d1/d76/structDiligent_1_1TextureDesc.html#a61757069b9f990537b730d7dc5033ee9">Diligent::TextureDesc::Format</a></div><div class="ttdeci">TEXTURE_FORMAT Format</div><div class="ttdoc">Texture format, see Diligent::TEXTURE_FORMAT.</div><div class="ttdef"><b>Definition</b> Texture.h:107</div></div>
</div><!-- fragment --><p>Since we are using mutable variables, we need to create a new SRB and set new texture to <code>g_Texture</code> shader variable:</p>
<div class="fragment"><div class="line">m_pRTSRB.Release();</div>
<div class="line">m_pRTPSO-&gt;CreateShaderResourceBinding(&amp;m_pRTSRB, <span class="keyword">true</span>);</div>
<div class="line">m_pRTSRB-&gt;GetVariableByName(SHADER_TYPE_PIXEL, <span class="stringliteral">&quot;g_Texture&quot;</span>)-&gt;</div>
<div class="line">            Set(pRTColor-&gt;GetDefaultView(TEXTURE_VIEW_SHADER_RESOURCE));</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md360"></a>
Rendering</h2>
<p>There are few changes that we need to make to our rendering procedure compared to the other tutorials. At the beginning of the frame, we need to activate our offscreen render target and clear color and depth buffers.</p>
<div class="fragment"><div class="line"><span class="keyword">const</span> <span class="keywordtype">float</span> ClearColor[] = { 0.350f,  0.350f,  0.350f, 1.0f };</div>
<div class="line">m_pImmediateContext-&gt;SetRenderTargets(1, &amp;m_pRTColorRTV, m_pRTDepthDSV,</div>
<div class="line">                                      RESOURCE_STATE_TRANSITION_MODE_TRANSITION);</div>
<div class="line">m_pImmediateContext-&gt;ClearRenderTarget(m_pRTColorRTV, ClearColor,</div>
<div class="line">                                       RESOURCE_STATE_TRANSITION_MODE_TRANSITION);</div>
<div class="line">m_pImmediateContext-&gt;ClearDepthStencil(m_pRTDepthDSV, CLEAR_DEPTH_FLAG, 1.0f, 0,</div>
<div class="line">                                       RESOURCE_STATE_TRANSITION_MODE_TRANSITION);</div>
</div><!-- fragment --><p>The rendering of our cube looks similar to other tutorials.</p>
<p>After we're done rendering the cube, we need to deactivate our offscreen render target and draw a fullscreen quad to the main framebuffer using our post-processing effect shader.</p>
<div class="fragment"><div class="line"><span class="keyword">const</span> <span class="keywordtype">float</span> Zero[] = { 0.0f,  0.0f,  0.0f, 1.0f };</div>
<div class="line">ITextureView* pRTV = m_pSwapChain-&gt;GetCurrentBackBufferRTV();</div>
<div class="line">ITextureView* pDSV = m_pSwapChain-&gt;GetDepthBufferDSV();</div>
<div class="line">m_pImmediateContext-&gt;SetRenderTargets(1, &amp;pRTV, pDSV,</div>
<div class="line">                                      RESOURCE_STATE_TRANSITION_MODE_TRANSITION);</div>
<div class="line">m_pImmediateContext-&gt;ClearRenderTarget(pRTV, Zero, RESOURCE_STATE_TRANSITION_MODE_TRANSITION);</div>
<div class="line">m_pImmediateContext-&gt;ClearDepthStencil(pDSV, CLEAR_DEPTH_FLAG, 1.f, 0,</div>
<div class="line">                                       RESOURCE_STATE_TRANSITION_MODE_TRANSITION);</div>
<div class="line"> </div>
<div class="line">m_pImmediateContext-&gt;SetPipelineState(m_pRTPSO);</div>
<div class="line">m_pImmediateContext-&gt;CommitShaderResources(m_pRTSRB, RESOURCE_STATE_TRANSITION_MODE_TRANSITION);</div>
<div class="line"> </div>
<div class="line">DrawAttribs RTDrawAttrs;</div>
<div class="line">RTDrawAttrs.<a class="code hl_variable" href="../../d6/dd0/structDiligent_1_1DrawAttribs.html#aac1a1696f8dbbbcc612ad6747ceb48de">NumVertices</a> = 4;</div>
<div class="line">RTDrawAttrs.Flags       = DRAW_FLAG_VERIFY_ALL; <span class="comment">// Verify all states</span></div>
<div class="line">m_pImmediateContext-&gt;Draw(RTDrawAttrs);</div>
<div class="ttc" id="astructDiligent_1_1DrawAttribs_html_aac1a1696f8dbbbcc612ad6747ceb48de"><div class="ttname"><a href="../../d6/dd0/structDiligent_1_1DrawAttribs.html#aac1a1696f8dbbbcc612ad6747ceb48de">Diligent::DrawAttribs::NumVertices</a></div><div class="ttdeci">Uint32 NumVertices</div><div class="ttdoc">The number of vertices to draw.</div><div class="ttdef"><b>Definition</b> DeviceContext.h:262</div></div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.13.2-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">
      <a href="https://diligentgraphics.com">
        <img class="footer" src="https://github.com/DiligentGraphics/DiligentCore/raw/master/media/diligentgraphics-logo.png" width="99" height="32" alt="Diligent Graphics" />
      </a>
    </li>
  </ul>
</div>
</body>
</html>
